(function($){function toIntegersAtLease(e){return e<10?"0"+e:e}Date.prototype.toJSON=function(e){return this.getUTCFullYear()+"-"+toIntegersAtLease(this.getUTCMonth())+"-"+toIntegersAtLease(this.getUTCDate())};var escapeable=/["\\\x00-\x1f\x7f-\x9f]/g,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};$.quoteString=function(e){return'"'+e.replace(escapeable,(function(e){var t=meta[e];return"string"==typeof t?t:(t=e.charCodeAt(),"\\u00"+Math.floor(t/16).toString(16)+(t%16).toString(16))}))+'"'},$.toJSON=function(e,t){var n=typeof e;if("undefined"==n)return"undefined";if("number"==n||"boolean"==n)return e+"";if(null===e)return"null";if("string"==n)return $.quoteString(e);if("object"==n&&"function"==typeof e.toJSON)return e.toJSON(t);if("function"!=n&&"number"==typeof e.length){for(var r=[],o=0;o<e.length;o++)r.push($.toJSON(e[o],t));return t?"["+r.join(",")+"]":"["+r.join(", ")+"]"}if("function"==n)throw new TypeError("Unable to convert object of type 'function' to json.");r=[];for(var i in e){var a;if("number"==(n=typeof i))a='"'+i+'"';else{if("string"!=n)continue;a=$.quoteString(i)}var l=$.toJSON(e[i],t);"string"==typeof l&&(t?r.push(a+":"+l):r.push(a+": "+l))}return"{"+r.join(", ")+"}"},$.compactJSON=function(e){return $.toJSON(e,!0)},$.evalJSON=function(src){return eval("("+src+")")},$.secureEvalJSON=function(src){var filtered=src;if(filtered=filtered.replace(/\\["\\\/bfnrtu]/g,"@"),filtered=filtered.replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]"),filtered=filtered.replace(/(?:^|:|,)(?:\s*\[)+/g,""),/^[\],:{}\s]*$/.test(filtered))return eval("("+src+")");throw new SyntaxError("Error parsing JSON, source is not valid.")}})(jQuery),jQuery(document).ready((function(e){"use strict";({init:function(){e(".noo-plupload").each((function(){var t=e(this);t.on("click","a.delete-pluploaded",(function(n){if(n.preventDefault(),confirm(nooPluploadL10n.confirmMsg)){var r=e(this),o={filename:r.data("filename"),nonce:nooPluploadL10n.remove,action:"noo_plupload_delete_file"},i=r.parent().index();e.post(nooPluploadL10n.ajaxurl,o,(function(n){r.parent().remove();var o=t.find(".noo-plupload-value"),a=o.val();(a=e.secureEvalJSON(a)).splice(i,1),o.val(e.toJSON(a))}))}})),"undefined"!=typeof plupload&&(t.find(".noo-plupload-btn").each((function(){var n=new plupload.Uploader(e(this).data("settings"));n.init(),n.bind("FilesAdded",(function(r,o){e.each(o,(function(e,n){t.find(".noo-plupload-preview").html('<div id="'+n.id+'">'+n.name+" ("+plupload.formatSize(n.size)+") <b></b></div>")})),r.refresh(),n.start()})),n.bind("UploadProgress",(function(t,n){e("#"+n.id+" b").html(n.percent+"%")})),n.bind("Error",(function(e,n){t.find(".noo-plupload-preview").html("<div>Error: "+n.code+", Message: "+n.message+(n.file?", File: "+n.file.name:"")+"</div>"),e.refresh()})),n.bind("FileUploaded",(function(n,r,o){var i=e.secureEvalJSON(o.response);if("error"!=i.status){var a="<strong>"+i.data.filename+"</strong>";if(a="<a class='delete-pluploaded' data-filename='"+i.data.filename+"' href='#' title='Delete File'><i class='far fa-trash-alt' style='color:#f00'></i></a> "+a,e("#"+r.id).html(a),100==r.percent&&i.status&&"ok"==i.status){var l=t.find(".noo-plupload-value"),u=l.val();(u=""===u?[]:e.parseJSON(u)).push(i.data.filename),l.val(e.toJSON(u))}}else t.find(".noo-plupload-preview").prepend(i.error.message)}))})),t.on("click",".noo-plupload-btn .plupload-btn",(function(e){uploader.start(),e.preventDefault()})))}))}}).init()}));